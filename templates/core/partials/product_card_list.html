{% load humanize %}

{% for product in products %}
<div class="col-lg-3 col-md-4 col-sm-6">
    <div class="product-m">
        <div class="product-m__thumb">
            <a class="aspect aspect--bg-grey aspect--square u-d-block" href="{% url 'base:product-detail' product.slug %}">
                <img class="aspect__img" src="{{ product.get_image_url }}" alt="{{ product.title }}">
            </a>
            <div class="product-m__quick-look">
                <a class="fas fa-search" data-modal="modal" data-modal-id="#quick-look" data-tooltip="tooltip" data-placement="top" title="Quick Look"></a>
            </div>
            <div class="product-m__add-cart">
                <a class="btn btn--e-brand-b-2" id="addCart" type="button" value="{{ product.id }}" data-product-id="{{ product.id }}" id="addToCart">Add to Cart</a>
            </div>
        </div>
        <div class="product-m__content">
            <div class="product-m__category">
                <a href="{% url 'base:product_category_list' product.category.cid %}">{{ product.category.title }}</a>
            </div>
            <div class="product-m__name">
                <a href="{% url 'base:product-detail' product.slug %}">{{ product.title }}</a>
            </div>
            <div class="product-m__rating gl-rating-style">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <span class="product-m__review">(23)</span>
            </div>
            <div class="product-m__price">
                Ugx. {{ product.price|intcomma }}/=
            </div>
            <div class="pd-detail__inline">
                <span class="pd-detail__stock">{{ product.stock }} in stock</span>
                {% if product.stock <= 5 %}
                <span class="pd-detail__left">Only {{ product.stock }} left</span>
                {% endif %}
                {% if product.tags.all %}
                {% for tag in product.tags.all %}
                <span class="pd-detail__tag" data-tag="{{ tag.name }}">{{ tag.name }}</span>
                {% endfor %}
                {% endif %}
            </div>
            <div class="product-m__hover">
                <div class="product-m__preview-description">
                    <span>{{ product.description|truncatechars:150 }}</span>
                </div>
                <div class="product-m__wishlist">
                    <a class="far fa-heart" href="#" data-tooltip="tooltip" data-placement="top" title="Add to Wishlist"></a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %} 